{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2 class="text-center">Welcome {{ user.first_name }}</h2>

  {% if today_log %}
  <div class="alert alert-info mt-4 text-center">
    <h5 class="mb-2">Today’s Summary ({{ today_log.start_date }}):</h5>
    {% with today_log.total_hours_and_minutes as time %}
    <p>
      <strong>{{ time.0 }}h {{ time.1 }}m</strong> driven —
      {% if today_log.over_daily_limit %}
      <br>
      <span class="text-danger fw-bold">Exceeded Driving Hours for today!</span>
      {% else %}
      <span class="text-success">Within Driving Hours for today</span>
      {% endif %}
      {% endwith %}
      <div class="mt-2 text-center">
        <a href="{% url 'day_summary' today_log.id %}" class="btn btn-primary btn-sm">
          Add trips to today's log
        </a>
      </div>
      <div class="mt-2 text-center">
        <form method="post" action="{% url 'delete_daylog' today_log.id %}"
          onsubmit="return confirm('Delete today\'s log?');">
          {% csrf_token %}
          <button type="submit" class="btn btn-outline-danger btn-sm">Delete Today’s Log</button>
        </form>
      </div>
  </div>
  {% else %}
  <div class="alert alert-info mt-4 text-center">
    <p>No day log created for today yet.</p>
    <a href="{% url 'create_today_log' %}" class="btn btn-sm btn-primary mt-2">Create Today's Log</a>
  </div>
  {% endif %}

  <div class="d-flex justify-content-center mt-4">
    <a href="{% url 'daylog_history' %}" class="btn btn-outline-primary">History of logs</a>
  </div>
</div>
{% endblock %}